# nethacked.rb
# https://github.com/Homebrew/homebrew-core/blob/master/Formula/nethacked.rb
# Converted on 02-02-2019

name='nethacked'
url=('https://github.com/nethacked/nethacked/archive/1.0.tar.gz')
description='Bugfixed and interface-patched Nethack'
version='1.0' # Guessed version.
priority='optional'
homepage='https://nethacked.github.io/'
# Patches
url+=('https://raw.githubusercontent.com/Homebrew/formula-patches/b40e459/nethacked/1.0.patch')

###### Install ######
# ENV.deparallelize
# system "sh", "sys/unix/setup.sh"
# inreplace "include/config.h",
# /^#\s*define HACKDIR.*$/,
# "#define HACKDIR \"#{libexec}\""
# wizard = Etc.getpwuid.name
# inreplace "include/config.h",
# /^#\s*define\s+WIZARD\s+"wizard"/,
# "#define WIZARD \"#{wizard}\""
# inreplace "include/config.h",
# /^#\s*define\s+WIZARD_NAME\s+"wizard"/,
# "#define WIZARD_NAME \"#{wizard}\""
# cd "dat" do
# system "make"
# %w[perm logfile].each do |f|
# touch f
# libexec.install f
# end
# libexec.install %w[help hh cmdhelp history opthelp wizhelp dungeon license data oracles options rumors quest.dat]
# libexec.install Dir["*.lev"]
# end
# ENV.append_to_cflags "-I../include"
# cd "src" do
# system "make"
# end
# bin.install "src/nethacked"
# (libexec+"save").mkpath
# chmod "g+w", libexec
# chmod "g+w", libexec+"save"
